{% extends 'base.html' %}
{% block title %}
Sum'App - Profile
{% endblock %}

{% block main %}
<section class="px-20 pt-10">
    <div class="flex ">
        <article class="flex w-1/3 flex-col items-start justify-center">
            <img src="https://cdn.discordapp.com/avatars/{{ user.id }}/{{ user.avatar }}"
                class="rounded-full mx-auto mb-5 h-64 w-64"></img>
            <h1
                class="text-3xl font-bold text-center w-full text-center pb-2 text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-sky-500 to-green-500">
                {{ user.global_name }}</h1>
            <p class="text-center w-full italic mb-10 text-slate-500">{{ user.discord_tag }}</p>
        </article>

        <article class="w-2/3 border p-10 rounded-lg shadow">
            <h2
                class="text-center font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-sky-500 to-green-500 text-3xl pb-5 border-b-2">
                Information sur les réunions</h2>
            <div class="my-6">
                <p class="text-lg font-medium text-gray-700">
                    Nombre total de réunions auxquelles j'ai participé :
                    <span class="font-bold text-cyan-600">{{ total_meetings }}</span>
                </p>
            </div>

            <div class="mb-6">
                <h3 class="text-lg font-bold mb-5">Les dernières réunions</h3>
                {% if recent_meetings %}
                <ul class="grid grid-cols-2 gap-4">
                    {% for meeting in recent_meetings %}
                    <a href="/summary/{{ meeting.id }}">
                        <li
                            class="text-gray-600 p-10 rounded-lg bg-gradient-to-r from-sky-50 via-skyn-50 to-sky-50 hover:from-cyan-100 hover:via-sky-200 hover:to-green-200 shadow">
                            {{ meeting.date }} - {{ meeting.title }}
                        </li>
                    </a>
                    {% endfor %}
                    {% else %}
                    <p class="text-gray-500 text-center italic">
                        Pas de réunion pour le moment
                    </p>
                    {% endif %}
                </ul>
            </div>
        </article>
    </div>
    <div class="">
        <h3 class="text-lg font-bold">Répartition des réunions</h3>
        <div class="overflow-x-auto">
            <table role="grid" aria-readonly="true" class="border-spacing-1 overflow-hidden relative">
                <thead>
                    <tr class="h-6">
                        <td colspan="1" class="p-0"></td>
                        {% for month in months %}
                        <td class="text-center text-sm font-medium relative" colspan="{{ month.colspan }}">
                            <span class="sr-only">{{ month.full_name }}</span>
                            <span aria-hidden="true" class="absolute top-0">{{ month.short_name }}</span>
                        </td>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% for line, day in heatmap %}
                    <tr class="h-[2px]">
                        <!-- Colonne avec les jours -->
                        <td class="ContributionCalendar-day p-0 text-right pr-2 text-[12px] font-bold flex items-center">
                            {{ day }}
                        </td>
                        <!-- Colonnes de la heatmap -->
                        {% for value in line %}
                        <td class="ContributionCalendar-day w-[30px] h-[30px] p-0 relative">
                            <svg class="absolute left-0 top-0 w-[20px] h-[20px]">
                                {% if value == 0 %}
                                <rect width="40" height="40" fill="#ebedf0"></rect>
                                {% elif value == 1 %}
                                <rect width="40" height="40" fill="#cce5ff"></rect>
                                {% elif value == 2 %}
                                <rect width="40" height="40" fill="#99ccff"></rect>
                                {% elif value <= 5 %} <rect width="40" height="40" fill="#3399ff">
                                    </rect>
                                    {% else %}
                                    <rect width="40" height="40" fill="#0066cc"></rect>
                                    {% endif %}
                            </svg>
                        </td>
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

        </div>
    </div>
</section>

{% endblock %}